---
import BaseLayout from '../layouts/BaseLayout.astro';
import CarList from '../components/CarList.astro';
import cars from '../data/car_data.json';
import type { Car } from '../types/CarDataTypes';
import Sidebar from '../components/Sidebar.astro';

const toggleIcon = '/icons/toggleFilterIcon.svg';

const typedCars = cars as Car[];
---

<BaseLayout title="opendbc">
	<div class="flex overflow-hidden relative">
		<Sidebar />
		<main class="w-full transition-all duration-300 mx-4">
			<!-- Header -->
			<div class="flex justify-between items-center px-4 mb-5">
				<div class="text-lg font-semibold font-mono">123 CARS IN RESULTS</div>
				<button
				id="sidebarToggle"
				class="bg-gray-300 p-2 border border-black z-50"
				>
				<img src={toggleIcon} alt="Toggle Icon" class="w-6 h-6" />
				</button>
			</div>
			<!-- Car List -->
			<div class="px-4">
				<CarList cars={typedCars} />
			</div>
		</main>
	</div>
</BaseLayout>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const toggle = document.getElementById('sidebarToggle');
    const sidebar = document.getElementById('sidebar');
    const mainContent = document.querySelector('main');

    if (toggle && sidebar && mainContent) {
      toggle.addEventListener('click', () => {
        sidebar.classList.toggle('-translate-x-full');
        mainContent.classList.toggle('pl-[380px]');
      });
    }
  });
</script>
